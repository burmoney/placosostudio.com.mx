<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Shopping Cart with Sizes & Gallery</title>
<!-- Normalize CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css" />
<style>
  /* Reset and base styles */
body {
  padding: 20px;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  background-color: #f0f2f5;
  color: #333;
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* Header */
h1 {
  text-align: center;
  font-weight: 600;
  margin-bottom: 10px;
  font-size: 2em;
  color: #222;
}

/* Gallery styles */
#productGallery {
  display: flex;
  overflow-x: auto;
  gap: 10px;
  padding: 10px;
  width: 100%;
  max-width: 1200px;
  margin-bottom: 20px;
  border-bottom: 2px solid #ccc;
  scrollbar-width: thin;
}
.product-card {
  flex: 0 0 auto;
  width: 150px;
  background: #fff;
  border-radius: 10px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.05);
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s, border 0.2s;
  padding: 5px;
  text-align: center;
}
.product-card:hover {
  transform: scale(1.02);
  box-shadow: 0 8px 16px rgba(0,0,0,0.1);
}
.product-card.selected {
  border: 3px solid #2980b9;
}
.product-card img {
  width: 100%;
  height: 120px;
  object-fit: cover;
  border-radius: 8px;
}
h4 {
  font-size: 1em;
  margin: 10px 0 0 0;
}

/* Buttons */
#addProductBtn {
  background-color: #2980b9;
  color: #fff;
  border: none;
  padding: 15px 20px;
  border-radius: 8px;
  font-size: 1.2em;
  cursor: pointer;
  margin-bottom: 30px;
  width: 100%;
  max-width: 350px;
  transition: background 0.2s;
}
#addProductBtn:hover {
  background-color: #3498db;
}

/* Discount input and button */
#discountSection {
  display: flex;
  gap: 10px;
  margin-bottom: 20px;
  width: 100%;
  max-width: 350px;
}
#userDiscountInput {
  flex: 1;
  padding: 8px;
  font-size: 1em;
  border-radius: 4px;
  border: 1px solid #ccc;
}
#applyDiscountBtn {
  background-color: #27ae60;
  color: #fff;
  border: none;
  padding: 10px 15px;
  border-radius: 8px;
  font-size: 1em;
  cursor: pointer;
  transition: background 0.2s;
}
#applyDiscountBtn:hover {
  background-color: #219150;
}

/* Cart styles */
#shoppingCart {
  width: 100%;
  max-width: 1100px;
  background: #fff;
  padding: 15px;
  border-radius: 10px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.05);
  margin-bottom: 20px;
}

/* Cart headers */
.column-labels {
  display: flex;
  flex-wrap: wrap;
  border-bottom: 2px solid #ddd;
  padding-bottom: 10px;
  margin-bottom: 10px;
  font-weight: 600;
  font-size: 1em;
}
.column-labels label {
  flex: 1;
  min-width: 80px;
  padding: 0 10px;
  text-align: left;
}

/* Cart items */
.product {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  padding: 10px 0;
  border-bottom: 1px solid #eee;
}
.product:hover {
  background-color: #fafafa;
}
.product-image {
  flex: 0 0 120px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 5px;
}
.productImage {
  width: 100%;
  height: 120px;
  background-size: cover;
  background-position: center;
  border-radius: 8px;
}
.product-details {
  flex: 2;
  padding: 0 10px;
}
.product-title {
  font-weight: 500;
  margin-bottom: 8px;
  font-size: 1.1em;
  color: #222;
}
.product-price {
  flex: 0.8;
  font-weight: 600;
  font-size: 1.1em;
  min-width: 80px;
  text-align: center;
}
.product-size {
  flex: 1.2;
  margin: 5px 10px;
}
.product-quantity {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
}
.number-control {
  display: inline-flex;
  align-items: center;
  border: 1px solid #ccc;
  border-radius: 8px;
  overflow: hidden;
  width: 100px;
  background-color: #fff;
}
.number-control input[type=number] {
  width: 50px;
  padding: 8px;
  border: none;
  text-align: center;
  font-size: 1em;
}
.buttons {
  display: flex;
  flex-direction: column;
}
.buttons button {
  padding: 4px;
  font-size: 1.4em;
  width: 100%;
  border: none;
  background: transparent;
  cursor: pointer;
}
.remove-product {
  background-color: #e74c3c;
  color: #fff;
  padding: 10px 15px;
  border-radius: 8px;
  margin: 5px;
  font-size: 1em;
}

/* Total section styles */
#cartTotals {
  width: 100%;
  max-width: 1100px;
  background: #fff;
  padding: 15px;
  border-radius: 10px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.05);
  margin-bottom: 20px;
}
.totals-item {
  display: flex;
  justify-content: space-between;
  margin-bottom: 10px;
}
.totals-item-total {
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-weight: 700;
  font-size: 1.3em;
}

/* Checkout button styling */
.checkout {
  display: block;
  width: 100%;
  max-width: 350px;
  background-color: #27ae60;
  color: #fff;
  padding: 15px;
  border-radius: 8px;
  font-size: 1.2em;
  margin-top: 20px;
  cursor: pointer;
  transition: background 0.2s;
}
.checkout:hover {
  background-color: #219150;
}

/* Popup styles for overlays */
.popup-overlay {
  position: fixed;
  top: 0; left: 0; right:0; bottom:0;
  background: rgba(0,0,0,0.5);
  display:flex;
  justify-content: center;
  align-items: center;
  z-index: 9999;
  display: none;
}
.popup {
  background: #fff;
  padding: 20px;
  border-radius: 10px;
  max-width: 90%;
  width: 350px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.2);
  text-align: center;
}
.popup h2 {
  margin-bottom: 15px;
}
.popup button {
  padding: 10px 20px;
  margin-top: 15px;
  border: none;
  background-color: #2980b9;
  color: #fff;
  border-radius: 8px;
  width: 100%;
}
.popup button:hover {
  background-color: #3498db;
}
</style>
</head>
<body>

<h1>Shopping Cart with Sizes & Carousel</h1>

<!-- Product gallery with 10 items -->
<div id="productGallery">
  <!-- Product 1 to 10 -->
  <div class="product-card" data-title="Product 1" data-price="100" data-img="https://raw.githubusercontent.com/burzachem/mustytrapstar/gh-pages/images/muztymarch1.jpg">
    <img src="https://raw.githubusercontent.com/burzachem/mustytrapstar/gh-pages/images/muztymarch1.jpg" alt="">
    <h4>Product 1</h4>
  </div>
  <div class="product-card" data-title="Product 2" data-price="150" data-img="https://raw.githubusercontent.com/burzachem/mustytrapstar/gh-pages/images/muztymarch2.jpg">
    <img src="https://raw.githubusercontent.com/burzachem/mustytrapstar/gh-pages/images/muztymarch2.jpg" alt="">
    <h4>Product 2</h4>
  </div>
  <div class="product-card" data-title="Product 3" data-price="200" data-img="https://raw.githubusercontent.com/burzachem/mustytrapstar/gh-pages/images/muztymarch3.jpg">
    <img src="https://raw.githubusercontent.com/burzachem/mustytrapstar/gh-pages/images/muztymarch3.jpg" alt="">
    <h4>Product 3</h4>
  </div>
  <div class="product-card" data-title="Product 4" data-price="120" data-img="https://raw.githubusercontent.com/burzachem/mustytrapstar/gh-pages/images/muztymarch4.jpg">
    <img src="https://raw.githubusercontent.com/burzachem/mustytrapstar/gh-pages/images/muztymarch4.jpg" alt="">
    <h4>Product 4</h4>
  </div>
  <div class="product-card" data-title="Product 5" data-price="180" data-img="https://raw.githubusercontent.com/burzachem/mustytrapstar/gh-pages/images/muztymarch5.jpg">
    <img src="https://raw.githubusercontent.com/burzachem/mustytrapstar/gh-pages/images/muztymarch5.jpg" alt="">
    <h4>Product 5</h4>
  </div>
  <div class="product-card" data-title="Product 6" data-price="130" data-img="https://raw.githubusercontent.com/burzachem/mustytrapstar/gh-pages/images/muztymarch6.jpg">
    <img src="https://raw.githubusercontent.com/burzachem/mustytrapstar/gh-pages/images/muztymarch6.jpg" alt="">
    <h4>Product 6</h4>
  </div>
  <div class="product-card" data-title="Product 7" data-price="170" data-img="https://raw.githubusercontent.com/burzachem/mustytrapstar/gh-pages/images/muztymarch7.jpg">
    <img src="https://raw.githubusercontent.com/burzachem/mustytrapstar/gh-pages/images/muztymarch7.jpg" alt="">
    <h4>Product 7</h4>
  </div>
  <div class="product-card" data-title="Product 8" data-price="160" data-img="https://raw.githubusercontent.com/burzachem/mustytrapstar/gh-pages/images/muztymarch8.jpg">
    <img src="https://raw.githubusercontent.com/burzachem/mustytrapstar/gh-pages/images/muztymarch8.jpg" alt="">
    <h4>Product 8</h4>
  </div>
  <div class="product-card" data-title="Product 9" data-price="190" data-img="https://raw.githubusercontent.com/burzachem/mustytrapstar/gh-pages/images/muztymarch9.jpg">
    <img src="https://raw.githubusercontent.com/burzachem/mustytrapstar/gh-pages/images/muztymarch9.jpg" alt="">
    <h4>Product 9</h4>
  </div>
  <div class="product-card" data-title="Product 10" data-price="210" data-img="https://raw.githubusercontent.com/burzachem/mustytrapstar/gh-pages/images/muztymarch10.jpg">
    <img src="https://raw.githubusercontent.com/burzachem/mustytrapstar/gh-pages/images/muztymarch10.jpg" alt="">
    <h4>Product 10</h4>
  </div>
</div>

<!-- Button to add selected product -->
<button id="addProductBtn" onclick="addSelectedProduct()">Add Selected Product to Cart</button>

<!-- Discount input and button -->
<div id="discountSection">
  <input type="text" id="userDiscountInput" placeholder="Enter discount code" />
  <button id="applyDiscountBtn" onclick="applyDiscount()">Apply Discount</button>
</div>

<!-- Shopping Cart -->
<div id="shoppingCart">
  <div class="column-labels">
    <label class="product-image">Image</label>
    <label class="product-details">Product</label>
    <label class="product-price">Price</label>
    <label class="product-size">Size</label>
    <label class="product-quantity">Quantity</label>
    <label class="product-removal">Remove</label>
    <label class="product-line-price">Total</label>
  </div>
</div>

<!-- Totals -->
<div id="cartTotals">
  <div class="totals-item">
    <label>Subtotal</label>
    <div class="totals-value" id="cart-subtotal">$0.00</div>
  </div>
  <div class="totals-item">
    <label>Tax (5%)</label>
    <div class="totals-value" id="cart-tax">$0.00</div>
  </div>
  <div class="totals-item">
    <label>Shipping</label>
    <div class="totals-value" id="cart-shipping">$0.00</div>
  </div>
  <div class="totals-item totals-item-total">
    <label>Grand Total</label>
    <div class="totals-value" id="cart-total">$0.00</div>
    <a href="../shipping/step1.html"><button class="checkout">Checkout</button></a> 

  </div>
  
</div>

<!-- PayPal Button Container (placeholder) -->
<div id="paypal-button-container"></div>

<!-- Scripts -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
<script src="https://www.paypal.com/sdk/js?client-id=YOUR_CLIENT_ID"></script>
<script>
  // Variables for discount
  let discountCode = 'MYCODE123';
  let discountPercent = 30; // set this to 0 if no discount
  let discountActive = false;

  // Select product
  let selectedProduct = null;

  // Auto-scroll carousel
  const gallery = document.getElementById('productGallery');
  let autoScrollInterval = null;

  function startAutoScroll() {
    if (autoScrollInterval) clearInterval(autoScrollInterval);
    autoScrollInterval = setInterval(() => {
      gallery.scrollLeft += 1;
      if (gallery.scrollLeft + gallery.clientWidth >= gallery.scrollWidth) {
        gallery.scrollLeft = 0;
      }
    }, 20);
  }
  startAutoScroll();

  // Select product on click
  document.querySelectorAll('.product-card').forEach(card => {
    card.addEventListener('click', () => {
      document.querySelectorAll('.product-card').forEach(c => c.classList.remove('selected'));
      card.classList.add('selected');
      selectedProduct = {
        title: card.dataset.title,
        price: parseFloat(card.dataset.price),
        img: card.dataset.img
      };
    });
  });

  // Add selected product to cart
function addSelectedProduct() {
  if (!selectedProduct) {
    alert('Please select a product!');
    return;
  }
  const cart = document.getElementById('shoppingCart');

  const productDiv = document.createElement('div');
  productDiv.className = 'product';

  const sizeOptions = ['S', 'M', 'L', 'XL', 'XXL'];
  const sizeOptionsHTML = sizeOptions.map(s => `<option value="${s}">${s}</option>`).join('');

  productDiv.innerHTML = `
    <div class="product-image">
      <div class="productImage" style="background-image: url(${selectedProduct.img});"></div>
    </div>
    <div class="product-details">
      <div class="product-title">${selectedProduct.title}</div>
    </div>
    <div class="product-price center">$${selectedProduct.price.toFixed(2)}</div>
    <div class="product-size">
      <select class="size-select">${sizeOptionsHTML}</select>
    </div>
    <div class="product-quantity">
      <div class="number-control">
        <input type="number" value="1" min="1" />
        <div class="buttons">
          <button onclick="changeNumber(this, 1)">&#9650;</button>
          <button onclick="changeNumber(this, -1)">&#9660;</button>
        </div>
      </div>
    </div>
    <div class="product-removal">
      <button class="remove-product" onclick="removeProduct(this)">Remove</button>
    </div>
    <div class="product-line-price">$${selectedProduct.price.toFixed(2)}</div>
  `;

  // Bind quantity change
  const qtyInput = productDiv.querySelector('.product-quantity input');
  qtyInput.addEventListener('change', () => updateQuantity(qtyInput));
  // Append to cart
  cart.appendChild(productDiv);
  recalculateCart();
}

// Change quantity
function changeNumber(btn, delta) {
  const input = btn.closest('.number-control').querySelector('input[type=number]');
  let val = parseInt(input.value);
  const min = parseInt(input.min);
  const max = parseInt(input.max);
  val += delta;
  if (val < min) val = min;
  if (max && val > max) val = max;
  input.value = val;
  input.dispatchEvent(new Event('change'));
}

// Remove product
function removeProduct(btn) {
  if (confirm('Remove this item?')) {
    btn.closest('.product').remove();
    recalculateCart();
  }
}

// Update line price on quantity change
function updateQuantity(input) {
  const price = parseFloat(input.closest('.product').querySelector('.product-price').innerText.replace('$', ''));
  const qty = parseInt(input.value);
  const linePrice = price * qty;
  input.closest('.product').querySelector('.product-line-price').innerText = '$' + linePrice.toFixed(2);
  recalculateCart();
}

// Recalculate totals and apply discount if active
function recalculateCart() {
  let subtotal = 0;
  document.querySelectorAll('.product').forEach(p => {
    const linePrice = parseFloat(p.querySelector('.product-line-price').innerText.replace('$', ''));
    subtotal += linePrice;
  });
  const tax = subtotal * 0.05;
  const shipping = subtotal > 0 ? 10 : 0;
  let total = subtotal + tax + shipping;

  if (discountActive && discountPercent > 0) {
    total = total - (total * (discountPercent / 100));
  }

  document.getElementById('cart-subtotal').innerText = '$' + subtotal.toFixed(2);
  document.getElementById('cart-tax').innerText = '$' + tax.toFixed(2);
  document.getElementById('cart-shipping').innerText = '$' + shipping.toFixed(2);
  document.getElementById('cart-total').innerText = '$' + total.toFixed(2);
}

// Apply discount code
function applyDiscount() {
  const userCode = document.getElementById('userDiscountInput').value.trim();
  if (userCode.toUpperCase() === discountCode.toUpperCase()) {
    alert('Discount code applied!');
    discountActive = true;
    recalculateCart();
  } else {
    alert('Invalid discount code.');
  }
}

// PayPal button setup (replace YOUR_CLIENT_ID)
paypal.Buttons({
  createOrder: function(data, actions) {
    const amount = parseFloat(document.getElementById('cart-total').innerText.replace('$', ''));
    return actions.order.create({
      purchase_units: [{ amount: { value: amount.toFixed(2) } }]
    });
  },
  onApprove: function(data, actions) {
    return actions.order.capture().then(function(details) {
      alert('Transaction completed by ' + details.payer.name.given_name);
    });
  }
}).render('#paypal-button-container');

// Popup functions
function showPopup(id) {
  document.getElementById(id).style.display = 'flex';
}
function closePopup() {
  document.querySelectorAll('.popup-overlay').forEach(p => p.style.display = 'none');
}

// Generate discount code from email/phone
function generateDiscount() {
  const contact = document.getElementById('userContact').value.trim();
  if (contact) {
    closePopup('emailPopup');
    document.getElementById('discountCode').value = 'DISCOUNT30'; // or generate dynamically
    alert('Your discount code is: DISCOUNT30');
  } else {
    alert('Please enter your email or phone.');
  }
}

// Copy discount code
function copyDiscountCode() {
  const code = document.getElementById('discountCode');
  code.select();
  document.execCommand('copy');
  alert('Code copied!');
}

// Add custom discount code
function addCustomCode() {
  const customCode = prompt("Enter your custom discount code:", "MYCODE123");
  if (customCode && customCode.trim() !== "") {
    document.getElementById('discountCode').value = customCode.trim();
    alert('Custom code saved!');
  }
}
</script>
</body>
</html>